[
    {
        "Target Usage": "",
        "Name": "Scene Manager DSE",
        "Short Description": "",
        "Documentation": {
            "Description": "\n\n<h3>\n Basic Concepts\n</h3>\n\n<p>\n This DSE works together with the Publish/Subscribe Context Broker \u2013 Context Awareness Platform in order to perform the event configuration, receive alert notifications, and manage the subscriptions to those events. A prototype web application has been developed for accessing the functionalities of the DSE. The figure below provides a screenshot of this web application, with the tab corresponding to the Scene Manager DSE.\n</p>\n\n<p style=\"text-align:center;\">\n <img alt=\"\" src=\"images/redmine/SceneManagerDSE.png\"/>\n</p>\n\n\n<h3>\n Basic Design Principles\n</h3>\n\n<p>\n An instance of the Publish/Subscribe Context Broker \u2013 Context Awareness Platform is used to create rules with their corresponding alerts. This instance is fed with data from each of the trial modules/subsystems, and each time it receives data, a check is done in order to notify which scenes created from the web interface have been fulfilled (i.e. the parameters which define the scene match the specified ranges).\n</p>\n\n<p>\n A service has been implemented  which sends data as service listener notifications both to the Publish/Subscribe Context Broker \u2013 Context Awareness Platform and to a database for storage, so that it can be accessed through web services.\n</p>\n\n<p>\n A programmed task in Java is in charge of creating the scenes in the Publish/Subscribe Context Broker - Context Awareness Platform, because this module cannot read directly from the internal databases of the trial.\n</p>\n\n<p>\n Additionally, another programmed task is in charge of maintaining all the subscriptions active, because their period of expiration is too limited for the application requirements (less than 1 day). This is the reason why this Java task is being executed continuously \u2013 otherwise the subscriptions would be lost due to the restrictions of the Context Awareness Platform. Thus, the programmed task ensures that all alerts are triggered and sent when the scene parameters are within the configured ranges.\n</p>\n\n<p>\n <ins>\n  Data model:\n </ins>\n</p>\n\n<p>\n The data model corresponding to the weather forecasting services is depicted below as an example:\n</p>\n\n<p style=\"text-align:center;\">\n <img alt=\"\" src=\"images/redmine/SceneManagerDataModel.png\"/>\n</p>\n\n<p>\n <ins>\n  Load Data:\n </ins>\n</p>\n\n<blockquote>\n <p>\n  Request:\n </p>\n</blockquote>\n\n<pre>\nhttp://publish_subscribe_ip/CB/ContextBroker/contextUpdate\n\nContent-Type: \n    application/xml\nRequest body:\n    &lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n    &lt;contextML xmlns=\"http://ContextML/1.7\" \n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"  \n    xsi:schemaLocation=\"http://ContextML/1.7 ../ContextML-1.7.xsd\"&gt;\n        &lt;ctxEls&gt;\n            &lt;ctxEl&gt;\n                &lt;contextProvider id=\"MyClient\" v=\"1.2.1\"/&gt;\n                &lt;entity id=\"123456789123\" type=\"imei\"/&gt;\n                &lt;scope&gt;cell&lt;/scope&gt;\n                &lt;timestamp&gt;2014-02-05T10:10:10+01:00&lt;/timestamp&gt;\n                &lt;expires&gt;2020-01-01T10:10:10+01:00&lt;/expires&gt;\n                &lt;dataPart&gt;\n                    &lt;par n=\"dirviento\"&gt;4&lt;/par&gt;\n                    &lt;par n=\"humrel\"&gt;4&lt;/par&gt;\n                    &lt;par n=\"modviento\"&gt;4&lt;/par&gt;\n                    &lt;par n=\"precip\"&gt;4&lt;/par&gt;\n                    &lt;par n=\"temp\"&gt;4&lt;/par&gt;               \n                &lt;/dataPart&gt;\n            &lt;/ctxEl&gt;\n        &lt;/ctxEls&gt;\n    &lt;/contextML&gt;\n</pre>\n\n<blockquote>\n <p>\n  Response:\n </p>\n</blockquote>\n\n<pre>\nResponse code:\n    200 OK\nContent-Type:\n    application/xml\nResponse body:\n    &lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n    &lt;contextML xmlns=\"http://ContextML/1.7\" \n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" \n    xsi:schemaLocation=\"http://ContextML/1.7 http://contextml.tilab.com/ContextML-1.7.xsd\"&gt;\n        &lt;ctxResp&gt;\n            &lt;contextProvider id=\"CB\" v=\"1.4.5\"/&gt;\n            &lt;timestamp&gt;2015-02-03T12:38:40+02:00&lt;/timestamp&gt;\n            &lt;entity id=\"123456789123\" type=\"imei\"/&gt;\n            &lt;method&gt;contextUpdate&lt;/method&gt;\n            &lt;resp status=\"OK\" code=\"200\"/&gt;\n        &lt;/ctxResp&gt;\n    &lt;/contextML&gt;\n</pre>\n\n<blockquote>\n <p>\n  Notifications to the client\n </p>\n</blockquote>\n\n<pre>\nResponse code:\n    200 OK\nContent-Type:\n    application/xml\nResponse body:\n    ctxData=&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n     &lt;contextML&gt;\n      &lt;ctxEls&gt;\n        &lt;ctxEl subId=\"62\"&gt;\n          &lt;contextProvider id=\"CB\" v=\"1.4.5\"/&gt;\n          &lt;entity id=\"123456789123\" type=\"imei\"/&gt;\n          &lt;scope&gt;cell&lt;/scope&gt;\n          &lt;timestamp&gt;2015-02-03T12:38:40+02:00&lt;/timestamp&gt;\n          &lt;expires&gt;2020-11-20T16:37:55+01:00&lt;/expires&gt;\n          &lt;dataPart&gt;\n            &lt;par n=\"temp\"&gt;4&lt;/par&gt;\n          &lt;/dataPart&gt;\n        &lt;/ctxEl&gt;\n      &lt;/ctxEls&gt;\n     &lt;/contextML&gt;\n</pre>\n\n<p>\n <em>\n  Methods\n </em>\n</p>\n\n<p>\n Get Alerts: This method provides the last notifications which the Publish/Subscribe Context Broker has sent to the client. It accepts GET parameters:\n</p>\n\n<ul>\n <li>\n  <em>\n   method\n  </em>\n  It shall be a String, representing the format of output data. There are two possible values:\n  <ul>\n   <li>\n    json\n   </li>\n   <li>\n    xml\n   </li>\n  </ul>\n </li>\n <li>\n  <em>\n   fecha_ini\n  </em>\n  It shall be an Integer representing a date in UNIX_TIMESTAMP format.\n </li>\n <li>\n  <em>\n   fecha_fin\n  </em>\n  It shall be an Integer representing a date in UNIX_TIMESTAMP format.\n </li>\n <li>\n  <em>\n   module\n  </em>\n  Should be an String, representing the module from which the alerts are provided (meteo, wsn, \u2026).\n </li>\n <li>\n  <em>\n   parameter\n  </em>\n  It shall be a String, representing a parameter (temp, humrel, \u2026). This parameter is optional.\n </li>\n</ul>\n\n<p>\n <em>\n  Example\n </em>\n</p>\n\n<blockquote>\n <p>\n  GET\n </p>\n</blockquote>\n\n<pre>\nhttp://s414608724.mialojamiento.es/FINESCE/api/{module_name}/{function_name}/?parameters\n</pre>\n\n<blockquote>\n <p>\n  Example using JSON\n </p>\n</blockquote>\n\n<pre>\nhttp://s414608724.mialojamiento.es/FINESCE/api/wf/getalerts/?action=service_alerts&amp;method=json&amp;module=wf&amp;parameter=temp&amp;fecha_ini=1421931600&amp;fecha_fin=1423054800\n\nREQUEST\n\nACCEPT\n    application/json\n\nRESPONSE\nResponse code:\n    200 OK\nContent-Type:\n    application/json\nResponse body:\n    {\"meteo\": [\n        { \n            \"temp\":\"6.29\" ,  \n            \"humrel\":\"0.60\" ,  \n            \"precip\":\"0.20\" ,  \n            \"modviento\":\"3\" ,  \n            \"dirviento\":\"190\" ,  \n            \"timestamp\":\"2015-01-22 16:00:00\" ,  \n            \"entity\":\"meteo\" ,  \n            \"scope\":\"cell\" \n        },\n        { \n            \"temp\":\"6.5\" ,  \n            \"humrel\":\"0.57\" ,  \n            \"precip\":\"0.0\" ,  \n            \"modviento\":\"3.4\" ,  \n            \"dirviento\":\"192\" ,  \n            \"timestamp\":\"2015-01-22 15:00:00\" ,  \n            \"entity\":\"meteo\" ,  \n            \"scope\":\"cell\" \n        },\n        { \n            \"temp\":\"7.2\" ,  \n            \"humrel\":\"0.47\" ,  \n            \"precip\":\"0.0\" ,  \n            \"modviento\":\"4.4\" ,  \n            \"dirviento\":\"191\" ,  \n            \"timestamp\":\"2015-01-22 14:00:00\" ,  \n            \"entity\":\"meteo\" ,  \n            \"scope\":\"cell\" \n        }\n    ]}\n</pre>\n\n<blockquote>\n <p>\n  Example using XML\n </p>\n</blockquote>\n\n<pre>\nhttp://s414608724.mialojamiento.es/FINESCE/api/wf/getalerts/?method=xml&amp;module=wf&amp;parameter=temp&amp;fecha_ini=1421931600&amp;fecha_fin=1422001600\n\nREQUEST\n\nACCEPT:     \n    application/xml\n\nRESPONSE\nResponse code:     \n    200 OK\nContent-Type:        \n    application/xml\nResponse body:    \n    &lt;contextML xmlns=\"http://ContextML/1.7\" \n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"  \n    xsi:schemaLocation=\"http://ContextML/1.7 ../ContextML-1.7.xsd\"&gt;\n        &lt;ctxEls&gt;\n            &lt;ctxEl&gt;\n                &lt;contextProvider id=\"MyClient\" v=\"1.2.1\"&gt;&lt;/contextProvider&gt;\n                &lt;entity id=\"123456789123\" type=\"imei\"&gt;&lt;/entity&gt;\n                &lt;scope&gt;cell&lt;/scope&gt;\n                &lt;timestamp&gt;2015-01-23T22:10:18+01:00&lt;/timestamp&gt;\n                &lt;expires&gt;2020-01-31T22:10:08+01:00&lt;/expires&gt;\n                &lt;datapart&gt;\n                    &lt;par n=\"temp\"&gt;6.29&lt;/par&gt;\n                    &lt;par n=\"humrel\"&gt;0.60&lt;/par&gt;\n                    &lt;par n=\"precip\"&gt;0.20&lt;/par&gt;\n                    &lt;par n=\"modviento\"&gt;3&lt;/par&gt;\n                    &lt;par n=\"dirviento\"&gt;190&lt;/par&gt;\n                    &lt;par n=\"timestamp\"&gt;2015-01-22 16:00:00&lt;/par&gt;\n                    &lt;par n=\"entity\"&gt;imei&lt;/par&gt;\n                    &lt;par n=\"scope\"&gt;cell&lt;/par&gt;\n                    &lt;par n=\"idsensor\"&gt;&lt;/par&gt;\n                &lt;/datapart&gt;\n            &lt;/ctxEl&gt;\n            &lt;ctxEl&gt;\n                &lt;contextProvider id=\"MyClient\" v=\"1.2.1\"&gt;&lt;/contextProvider&gt;\n                &lt;entity id=\"123456789123\" type=\"imei\"&gt;&lt;/entity&gt;\n                &lt;scope&gt;cell&lt;/scope&gt;\n                &lt;timestamp&gt;2015-01-21T22:10:18+01:00&lt;/timestamp&gt;\n                &lt;expires&gt;2020-01-31T22:10:08+01:00&lt;/expires&gt;\n                &lt;datapart&gt;\n                    &lt;par n=\"temp\"&gt;6.5&lt;/par&gt;\n                    &lt;par n=\"humrel\"&gt;0.57&lt;/par&gt;\n                    &lt;par n=\"precip\"&gt;0.0&lt;/par&gt;\n                    &lt;par n=\"modviento\"&gt;3.4&lt;/par&gt;\n                    &lt;par n=\"dirviento\"&gt;192&lt;/par&gt;\n                    &lt;par n=\"timestamp\"&gt;2015-01-22 15:00:00&lt;/par&gt;\n                    &lt;par n=\"entity\"&gt;imei&lt;/par&gt;\n                    &lt;par n=\"scope\"&gt;cell&lt;/par&gt;\n                    &lt;par n=\"idsensor\"&gt;&lt;/par&gt;\n                &lt;/datapart&gt;\n            &lt;/ctxEl&gt;\n            &lt;ctxEl&gt;\n                &lt;contextProvider id=\"MyClient\" v=\"1.2.1\"&gt;&lt;/contextProvider&gt;\n                &lt;entity id=\"123456789123\" type=\"imei\"&gt;&lt;/entity&gt;\n                &lt;scope&gt;cell&lt;/scope&gt;\n                &lt;timestamp&gt;2015-01-23T22:10:18+01:00&lt;/timestamp&gt;\n                &lt;expires&gt;2020-01-31T22:10:08+01:00&lt;/expires&gt;\n                &lt;datapart&gt;\n                    &lt;par n=\"temp\"&gt;7.2&lt;/par&gt;\n                    &lt;par n=\"humrel\"&gt;0.47&lt;/par&gt;\n                    &lt;par n=\"precip\"&gt;0.0&lt;/par&gt;\n                    &lt;par n=\"modviento\"&gt;4.4&lt;/par&gt;\n                    &lt;par n=\"dirviento\"&gt;191&lt;/par&gt;\n                    &lt;par n=\"timestamp\"&gt;2015-01-22 14:00:00&lt;/par&gt;\n                    &lt;par n=\"entity\"&gt;imei&lt;/par&gt;\n                    &lt;par n=\"scope\"&gt;cell&lt;/par&gt;\n                    &lt;par n=\"idsensor\"&gt;&lt;/par&gt;\n                &lt;/datapart&gt;\n            &lt;/ctxEl&gt;\n        &lt;/ctxEls&gt;\n    &lt;/contextML&gt;\n</pre>\n\n\n",
            "Copyright": "\n<p>\n Copyright \u00a9 2014 by FINESCE\n</p>\n\n\n",
            "Glossary": "",
            "References": "",
            "Details": "",
            "Preface": "\n<p>\n Within this document you find a self-contained open specification of the aforementioned Domain Specific Enabler (DSE).\n</p>\n\n<p>\n Please consult the appropriate pages on the\n <a class=\"external\" href=\"http://www.finesce.eu/Trial_Site_Madrid.html\">\n  FINESCE\n </a>\n website in order to understand the complete context of the related FINESCE trials and this DSE.\n</p>\n\n\n",
            "ReutilisedTech": "\n<p>\n The Scene Manager DSE relies on the Publish/Subscribe Context Broker - Context Awareness Platform.\n</p>\n\n\n"
        },
        "WP": "",
        "Terms and Conditions": "\n<p>\n This DSE will be available as Open Source (Apache License 2.0).\n</p>\n\n\n",
        "wiki_attachments": [
            "/redmine/attachments/download/2156/SceneManagerDSE.png",
            "/redmine/attachments/download/2179/SceneManagerDataModel.png"
        ],
        "Open Source": "",
        "Contact Person": "\n<p>\n Jos\u00e9 Luis Bur\u00f3n\n <br/>\n ACCIONA Infraestructuras\n <br/>\n <a class=\"email\" href=\"mailto:joseluis.buron.martinezREMOVE-NO-SPAM@acciona.com\">\n  joseluis.buron.martinezREMOVE-NO-SPAM@acciona.com\n </a>\n</p>\n\n",
        "Overview": "\n<p>\n The purpose of the Scene Manager DSE is to allow the configuration of a set of multiple parameters (scene) from the different Madrid trial subsystems, based on which different alerts can be triggered and offered to subscribed users.\n</p>\n\n\n<h3>\n What you get\n</h3>\n\n<p>\n With the Scene Manager DSE it is possible to access a set of configurable parameters from the Madrid trial, and to create customized scenes based on them. Currently the accessible parameters are associated to the following subsystems:\n <br/>\n - Smart metering infrastructure, based on wireless sensor technology\n <br/>\n - Weather forecasting system, based on an Internet web service\n <br/>\n The parameters from the following subsytems will be made accessible as well:\n <br/>\n - Building Control Centre, a tool which allows remote connection to the Building Management System (BMS)\n <br/>\n - Micro-grid, which includes PV solar panels, simulated wind power, a battery, and a load with configurable profile.\n</p>\n\n\n<h3>\n Why to get it\n</h3>\n\n<p>\n This DSE provides to FIWARE adopters guidance on how to establish an alert management system based on multiple conditions set by the end users of the application. It is based on the Publish/Subscribe Context Broker - Context Awareness Platform, but it could be modified to use Orion Context Broker GE instead.\n</p>\n\n\n",
        "Downloads": "\n<p>\n To be released in Q1/2015.\n</p>\n\n\n",
        "Instances": "\n<p>\n An instance of this DSE\u2019s reference implementation runs as a part of the trial and is not publicly accessible.\n</p>\n\n\n"
    }
]