[
    {
        "Target Usage": "",
        "Name": "Contract Tailor Processor (ContractManager **) ",
        "Short Description": "",
        "Documentation": {
            "Description": "\n\n<h3>\n Basic Concepts\n</h3>\n\n<p>\n ContractManager is a REST based client that exposes two @POST methods: a) @sendContract which translates an IncentivePlan (marked \"Compliant\" by the market regulator) into a Contract proposal Orion entity, b) @updateContract which allows the e-marketplace customer user interface to accept or reject the contract proposal by updating the Orion entity status.\n</p>\n\n\n<h3>\n Basic Design Principles\n</h3>\n\n<p>\n The following picture gives a snapshot of the java classes that have been developed for ContractManager:\n</p>\n\n<p style=\"text-align:center;\">\n <img alt=\"\" src=\"images/redmine/ContractManager_Domain_Model.jpg\"/>\n <br/>\n <strong>\n  Figure 1: ContractManager domain model\n </strong>\n</p>\n\n\n",
            "Copyright": "\n<p>\n Copyright \u00a9 2014 by FINESCE\n</p>\n\n\n",
            "Glossary": "\n\n",
            "References": "\n\n",
            "Details": "\n<p>\n IMPORTANT: we kindly remind you that this software module is strictly tight to the use of ORION Context Broker GE thus meaning that you should have previously set up an ORION instance of yours. Please have a look at ORION GE documentation at the following link\n <a class=\"external\" href=\"http://catalogue.fi-ware.org/enablers/publishsubscribe-context-broker-orion-context-broker\">\n  publishsubscribe-context-broker-orion-context-broker\n </a>\n</p>\n\n<p>\n Download the artefact (in the form a .war file) from the bottom of the page.\n <br/>\n Open the .war file (you can use an appropriate software like \u201cwinRar\u201d), open the  \u201ccontractManager.properties\u201d file located in the following directory:  WEB-INF/classes/ and then amend the following configuration properties:\n</p>\n\n<pre>\ncontractManager.orionServerUrl = http://(your ORION instance URL):1026\ncontractManager.registerContexPath = NGSI10/updateContext\n</pre>\n\n<p>\n Save the changes to the .properties file and deploy the .war file on a Tomcat application server  using the \u201cTomcat Web Application Manager\u201d (see attached screenshot). We recommend you to use an updated version of Tomcat; we have used Apache Tomcat 7.xx.\n</p>\n\n<p style=\"text-align:center;\">\n <img alt=\"\" src=\"images/redmine/tomcat_deploy_contractManager.jpg\" style=\"width:1000px;\"/>\n <br/>\n <strong>\n  Figure 2: How to the deploy the contractManager.war file\n </strong>\n</p>\n\n<p>\n In order to verify that the deploy of the contractManager application has been done successfully and that it consequently runs, you have to type the following URL in a common browser like Google Chrome or Microsoft Internet Explorer:\n</p>\n\n<pre>\nhttp://(your tomcat ip)/contractManager/rest/sendContractData\n</pre>\n\n<p>\n and you should get a page like the following (see attached screenshot).\n</p>\n\n<p style=\"text-align:center;\">\n <img alt=\"\" src=\"images/redmine/sample_contract.jpg\" style=\"width:800px;\"/>\n <br/>\n <strong>\n  Figure 3: Test \"sendContract\" GET method in a browser\n </strong>\n</p>\n\n<p>\n If the previous page appears, the ContractManager application is correctly deployed.\n</p>\n\n<p>\n Now, in order to send a \u201cContract\u201d to ORION, use a REST client such as DHC - REST/HTTP API Client chrome extension (see attached screenshot):\n</p>\n\n<p style=\"text-align:center;\">\n <img alt=\"\" src=\"images/redmine/IP_notification2Orion.png\" style=\"width:1000px;\"/>\n <br/>\n <strong>\n  Figure 4: Send a \"Contract data\" to ORION\n </strong>\n</p>\n\n<p>\n Please fill in with the following parametres:\n <br/>\n SERVICE (POST)\n <br/>\n</p>\n<pre>\nhttp://(your ip)/contractManager/rest/sendContractData\n</pre>\n\n<p>\n HEADERS\n <br/>\n</p>\n<pre>\nContent-Type: application/xml\n</pre>\n\n<p>\n BODY\n <br/>\n</p>\n<pre>\n&lt;notifyContextRequest&gt;\n  &lt;subscriptionId&gt;51c04a21d714fb3b37d7d5a7&lt;/subscriptionId&gt;\n  &lt;originator&gt;(your tomcat host)&lt;/originator&gt;\n  &lt;contextResponseList&gt;\n    &lt;contextElementResponse&gt;\n      &lt;contextElement&gt;\n        &lt;entityId type=\"IncentivePlan\" isPattern=\"false\"&gt;\n          &lt;id&gt;Incentive1&lt;/id&gt;\n        &lt;/entityId&gt;\n        &lt;contextAttributeList&gt;\n          &lt;contextAttribute&gt;\n            &lt;name&gt;IPId&lt;/name&gt;\n            &lt;type&gt;string&lt;/type&gt;\n            &lt;contextValue&gt;incentive_1&lt;/contextValue&gt;\n          &lt;/contextAttribute&gt;\n          ..................\n          ..................\n          &lt;contextAttribute&gt;\n            &lt;name&gt;Incentive1Offer&lt;/name&gt;\n            &lt;type&gt;string&lt;/type&gt;\n            &lt;contextValue&gt;your offer&lt;/contextValue&gt;\n          &lt;/contextAttribute&gt;\n          ..................\n          ..................\n          &lt;contextAttribute&gt;\n            &lt;name&gt;State&lt;/name&gt;\n            &lt;type&gt;string&lt;/type&gt;\n            &lt;contextValue&gt;Compliant&lt;/contextValue&gt;\n          &lt;/contextAttribute&gt;\n        &lt;/contextAttributeList&gt;\n      &lt;/contextElement&gt;\n      &lt;statusCode&gt;\n        <code>200</code><br/>        &lt;reasonPhrase&gt;OK&lt;/reasonPhrase&gt;<br/>      &lt;/statusCode&gt;<br/>    &lt;/contextElementResponse&gt;<br/>  &lt;/contextResponseList&gt;<br/>&lt;/notifyContextRequest&gt;<br/>EOF<br/></pre>\n\n<p>\n and finally click the SEND button.\n</p>\n\n<p>\n If you get 200 OK in the HTTP Response, you should have submitted a \u201ccontract\u201d to ORION.\n</p>\n\n<p>\n In order to verify that a new \u201cContract\u201d has been saved into ORION, an entity of the following type should be created (or updated in case it already exists) in the NoSQL DB underlying ORION (i.e. MongoDB):\n <br/>\n</p>\n<pre>\n{\n  \"_id\" : {\n    \"id\" : \"contract2orion\",\n    \"type\" : \"Contract\" \n  },\n  \"attrs\" : [{\n      \"name\" : \"currentTime\",\n      \"type\" : \"sec\",\n      \"creDate\" : 1423578592,\n      \"modDate\" : 1423578592,\n      \"value\" : \"1423578805\" \n    }, {\n      \"name\" : \"contractId\",\n      \"type\" : \"string\",\n      \"creDate\" : 1423578592,\n      \"modDate\" : 1423578592,\n      \"value\" : \"IncentivePlan_energy-retailer_1423578590_0512690040069_1423578805\" \n    }, {\n      \"name\" : \"IPId\",\n      \"type\" : \"key\",\n      \"creDate\" : 1423578592,\n      \"modDate\" : 1423578592,\n      \"value\" : \"IncentivePlan_energy-retailer_1423578590\" \n    }, {\n      \"name\" : \"customerId\",\n      \"type\" : \"string\",\n      \"creDate\" : 1423578592,\n      \"modDate\" : 1423578592,\n      \"value\" : \"WP4_U_14\" \n    }, {\n      \"name\" : \"meterId\",\n      \"type\" : \"string\",\n      \"creDate\" : 1423578592,\n      \"modDate\" : 1423578592,\n      \"value\" : \"0512690040069\" \n    }, {\n      \"name\" : \"Incentive1PlanTarget\",\n      \"type\" : \"string\",\n      \"creDate\" : 1423578592,\n      \"modDate\" : 1423578592,\n      \"value\" : \"Energy Consumption\" \n    }, {\n      \"name\" : \"Incentive1Type\",\n      \"type\" : \"string\",\n      \"creDate\" : 1423578592,\n      \"modDate\" : 1423578592,\n      \"value\" : \"Increase\" \n    }, {\n      \"name\" : \"Incentive1Value\",\n      \"type\" : \"string\",\n      \"creDate\" : 1423578592,\n      \"modDate\" : 1423578592,\n      \"value\" : \"2.0\" \n    }, {\n      \"name\" : \"Incentive1StartDateTime\",\n      \"type\" : \"datetime\",\n      \"creDate\" : 1423578592,\n      \"modDate\" : 1423578592,\n      \"value\" : \"1423350000\" \n    }, {\n      \"name\" : \"Incentive1EndDateTime\",\n      \"type\" : \"datetime\",\n      \"creDate\" : 1423578592,\n      \"modDate\" : 1423578592,\n      \"value\" : \"1423522800\" \n    }, {\n      \"name\" : \"Incentive1Offer\",\n      \"type\" : \"string\",\n      \"creDate\" : 1423578592,\n      \"modDate\" : 1423578592,\n      \"value\" : \"Two free monts\" \n    }, {\n      \"name\" : \"i1CustomerApproval\",\n      \"type\" : \"int\",\n      \"creDate\" : 1423578592,\n      \"modDate\" : 1423578592,\n      \"value\" : \"0\" \n    }, {\n      \"name\" : \"Incentive2PlanTarget\",\n      \"type\" : \"string\",\n      \"creDate\" : 1423578592,\n      \"modDate\" : 1423578592,\n      \"value\" : \"none\" \n    }, {\n      \"name\" : \"Incentive2Type\",\n      \"type\" : \"string\",\n      \"creDate\" : 1423578592,\n      \"modDate\" : 1423578592,\n      \"value\" : \"none\" \n    }, {\n      \"name\" : \"Incentive2Value\",\n      \"type\" : \"string\",\n      \"creDate\" : 1423578592,\n      \"modDate\" : 1423578592,\n      \"value\" : \"0.0\" \n    }, {\n      \"name\" : \"Incentive2StartDateTime\",\n      \"type\" : \"datetime\",\n      \"creDate\" : 1423578592,\n      \"modDate\" : 1423578592,\n      \"value\" : \"0\" \n    }, {\n      \"name\" : \"Incentive2EndDateTime\",\n      \"type\" : \"datetime\",\n      \"creDate\" : 1423578592,\n      \"modDate\" : 1423578592,\n      \"value\" : \"0\" \n    }, {\n      \"name\" : \"Incentive2Offer\",\n      \"type\" : \"string\",\n      \"creDate\" : 1423578592,\n      \"modDate\" : 1423578592,\n      \"value\" : \"-\" \n    }, {\n      \"name\" : \"i2CustomerApproval\",\n      \"type\" : \"int\",\n      \"creDate\" : 1423578592,\n      \"modDate\" : 1423578592,\n      \"value\" : \"0\" \n    }, {\n      \"name\" : \"Incentive3PlanTarget\",\n      \"type\" : \"string\",\n      \"creDate\" : 1423578592,\n      \"modDate\" : 1423578592,\n      \"value\" : \"none\" \n    }, {\n      \"name\" : \"Incentive3Type\",\n      \"type\" : \"string\",\n      \"creDate\" : 1423578592,\n      \"modDate\" : 1423578592,\n      \"value\" : \"none\" \n    }, {\n      \"name\" : \"Incentive3Value\",\n      \"type\" : \"string\",\n      \"creDate\" : 1423578592,\n      \"modDate\" : 1423578592,\n      \"value\" : \"0.0\" \n    }, {\n      \"name\" : \"Incentive3StartDateTime\",\n      \"type\" : \"datetime\",\n      \"creDate\" : 1423578592,\n      \"modDate\" : 1423578592,\n      \"value\" : \"0\" \n    }, {\n      \"name\" : \"Incentive3EndDateTime\",\n      \"type\" : \"datetime\",\n      \"creDate\" : 1423578592,\n      \"modDate\" : 1423578592,\n      \"value\" : \"0\" \n    }, {\n      \"name\" : \"Incentive3Offer\",\n      \"type\" : \"string\",\n      \"creDate\" : 1423578592,\n      \"modDate\" : 1423578592,\n      \"value\" : \"-\" \n    }, {\n      \"name\" : \"i3CustomerApproval\",\n      \"type\" : \"int\",\n      \"creDate\" : 1423578592,\n      \"modDate\" : 1423578592,\n      \"value\" : \"0\" \n    }, {\n      \"name\" : \"Incentive4PlanTarget\",\n      \"type\" : \"string\",\n      \"creDate\" : 1423578592,\n      \"modDate\" : 1423578592,\n      \"value\" : \"none\" \n    }, {\n      \"name\" : \"Incentive4Type\",\n      \"type\" : \"string\",\n      \"creDate\" : 1423578592,\n      \"modDate\" : 1423578592,\n      \"value\" : \"none\" \n    }, {\n      \"name\" : \"Incentive4Value\",\n      \"type\" : \"string\",\n      \"creDate\" : 1423578592,\n      \"modDate\" : 1423578592,\n      \"value\" : \"0.0\" \n    }, {\n      \"name\" : \"Incentive4StartDateTime\",\n      \"type\" : \"datetime\",\n      \"creDate\" : 1423578592,\n      \"modDate\" : 1423578592,\n      \"value\" : \"0\" \n    }, {\n      \"name\" : \"Incentive4EndDateTime\",\n      \"type\" : \"datetime\",\n      \"creDate\" : 1423578592,\n      \"modDate\" : 1423578592,\n      \"value\" : \"0\" \n    }, {\n      \"name\" : \"Incentive4Offer\",\n      \"type\" : \"string\",\n      \"creDate\" : 1423578592,\n      \"modDate\" : 1423578592,\n      \"value\" : \"-\" \n    }, {\n      \"name\" : \"i4CustomerApproval\",\n      \"type\" : \"int\",\n      \"creDate\" : 1423578592,\n      \"modDate\" : 1423578592,\n      \"value\" : \"0\" \n    }, {\n      \"name\" : \"Incentive5PlanTarget\",\n      \"type\" : \"string\",\n      \"creDate\" : 1423578592,\n      \"modDate\" : 1423578592,\n      \"value\" : \"none\" \n    }, {\n      \"name\" : \"Incentive5Type\",\n      \"type\" : \"string\",\n      \"creDate\" : 1423578592,\n      \"modDate\" : 1423578592,\n      \"value\" : \"none\" \n    }, {\n      \"name\" : \"Incentive5Value\",\n      \"type\" : \"string\",\n      \"creDate\" : 1423578592,\n      \"modDate\" : 1423578592,\n      \"value\" : \"0.0\" \n    }, {\n      \"name\" : \"Incentive5StartDateTime\",\n      \"type\" : \"datetime\",\n      \"creDate\" : 1423578592,\n      \"modDate\" : 1423578592,\n      \"value\" : \"0\" \n    }, {\n      \"name\" : \"Incentive5EndDateTime\",\n      \"type\" : \"datetime\",\n      \"creDate\" : 1423578592,\n      \"modDate\" : 1423578592,\n      \"value\" : \"0\" \n    }, {\n      \"name\" : \"Incentive5Offer\",\n      \"type\" : \"string\",\n      \"creDate\" : 1423578592,\n      \"modDate\" : 1423578592,\n      \"value\" : \"-\" \n    }, {\n      \"name\" : \"i5CustomerApproval\",\n      \"type\" : \"int\",\n      \"creDate\" : 1423578592,\n      \"modDate\" : 1423578592,\n      \"value\" : \"0\" \n    }, {\n      \"name\" : \"dateOfCreation\",\n      \"type\" : \"string\",\n      \"creDate\" : 1423578592,\n      \"modDate\" : 1423578592,\n      \"value\" : \"1423578594\" \n    }, {\n      \"name\" : \"dateOfApproval\",\n      \"type\" : \"string\",\n      \"creDate\" : 1423578592,\n      \"modDate\" : 1423578592,\n      \"value\" : \"0\" \n    }, {\n      \"name\" : \"State\",\n      \"type\" : \"string\",\n      \"creDate\" : 1423578592,\n      \"modDate\" : 1423578592,\n      \"value\" : \"UnderApproval\" \n    }],\n  \"creDate\" : 1423578592,\n  \"modDate\" : 1423578592\n}\n</pre>\n\n\n<h3>\n Address/Protocol\n</h3>\n\n<p>\n The address of the REST call invoking the ContractManager service depends on the IP address/port of the application server where the module is going to be deployed.\n <br/>\n</p>\n<pre>\nEXAMPLE: http://(your tomcat ip)/contractManager/rest/sendContractData\n</pre>\n\n<p>\n Protocol: HTTP\n</p>\n\n\n<h3>\n Commands\n</h3>\n\n\n\nThe following HTTP commands can be used to manipulate the data controlled by the DSE:\n\t<ul>\n <li>\n  HTTP GET command used to test if the module has been properly installed; a simple XML, such the one shown below, is expected as output:\n </li>\n</ul>\n\n<blockquote>\n <blockquote>\n  <p>\n   &lt;contract&gt;\n   <br/>\n   &lt;currentTime&gt;1435053274078&lt;/currentTime&gt;\n   <br/>\n   &lt;dateOfCreation&gt;0&lt;/dateOfCreation&gt;\n   <br/>\n   &lt;dateOfApproval&gt;0&lt;/dateOfApproval&gt;\n   <br/>\n   &lt;contractID&gt;Contract1&lt;/contractID&gt;\n   <br/>\n   &lt;incentivePlanID&gt;incentive_1&lt;/incentivePlanID&gt;\n   <br/>\n   &lt;customerID&gt;customer1&lt;/customerID&gt;\n   <br/>\n   &lt;ip1_value&gt;0.0&lt;/ip1_value&gt;\n   <br/>\n   &lt;ip1_start&gt;0&lt;/ip1_start&gt;\n   <br/>\n   &lt;ip1_end&gt;0&lt;/ip1_end&gt;\n   <br/>\n   &lt;ip1_customerApproval&gt;0&lt;/ip1_customerApproval&gt;\n   <br/>\n   &lt;ip2_value&gt;0.0&lt;/ip2_value&gt;\n   <br/>\n   &lt;ip2_start&gt;0&lt;/ip2_start&gt;\n   <br/>\n   &lt;ip2_end&gt;0&lt;/ip2_end&gt;\n   <br/>\n   &lt;ip2_customerApproval&gt;0&lt;/ip2_customerApproval&gt;\n   <br/>\n   &lt;ip3_value&gt;0.0&lt;/ip3_value&gt;\n   <br/>\n   &lt;ip3_start&gt;0&lt;/ip3_start&gt;\n   <br/>\n   &lt;ip3_end&gt;0&lt;/ip3_end&gt;\n   <br/>\n   &lt;ip3_customerApproval&gt;0&lt;/ip3_customerApproval&gt;\n   <br/>\n   &lt;ip4_value&gt;0.0&lt;/ip4_value&gt;\n   <br/>\n   &lt;ip4_start&gt;0&lt;/ip4_start&gt;\n   <br/>\n   &lt;ip4_end&gt;0&lt;/ip4_end&gt;\n   <br/>\n   &lt;ip4_customerApproval&gt;0&lt;/ip4_customerApproval&gt;\n   <br/>\n   &lt;ip5_value&gt;0.0&lt;/ip5_value&gt;\n   <br/>\n   &lt;ip5_start&gt;0&lt;/ip5_start&gt;\n   <br/>\n   &lt;ip5_end&gt;0&lt;/ip5_end&gt;\n   <br/>\n   &lt;ip5_customerApproval&gt;0&lt;/ip5_customerApproval&gt;\n   <br/>\n   &lt;/contract&gt;\n  </p>\n </blockquote>\n</blockquote>\n\n<ul>\n <li>\n  HTTP POST to send new information to the module.\n </li>\n</ul>\n\n\n<h3>\n Endpoints\n</h3>\n\n<p>\n The base URI to invoke the rest method exposed by ContractManager is:\n <br/>\n</p>\n<pre>\nhttp://(your tomcat ip)/contractManager/rest/sendContractData\n</pre>\n\n<p>\n The is a POST method which needs the following parameters to be submitted:\n <br/>\n</p>\n<pre>\ncurrentTime\nIPId\ncustomerId\nmeterId\nIncentive1PlanTarget\nIncentive1Type\nIncentive1Value\nIncentive1StartDateTime\nIncentive1EndDateTime\nIncentive1Offer\n..............\n..............\n..............\n..............\nIncentive5PlanTarget\nIncentive5Type\nIncentive5Value\nIncentive5StartDateTime\nIncentive5EndDateTime\nState\nIncentive1Offer\n</pre>\n\n\n",
            "Preface": "\n<p>\n Within this document you find a self-contained open specification of the aforementioned Domain Specific Enabler (DSE).\n</p>\n\n<p>\n Please consult the appropriate pages on the\n <a class=\"external\" href=\"http://www.finesce.eu/Trial_Site_Terni.html\">\n  FINESCE\n </a>\n website in order to understand the complete context of the related FINESCE trials and this DSE.\n</p>\n\n\n",
            "ReutilisedTech": "\n<p>\n Jersey - RESTful Web Services in Java (\n <a class=\"external\" href=\"https://jersey.java.net/\">\n </a>\n )\n</p>\n\n\n"
        },
        "WP": "",
        "Terms and Conditions": "\n<p>\n Software associated to the ContractManager product is provided as open source under the Apache2 license. Please check the specific terms and conditions linked to this open source license at\n <a class=\"external\" href=\"http://www.apache.org/licenses/LICENSE-2.0\">\n  LICENSE-2.0\n </a>\n</p>\n\n\n",
        "wiki_attachments": [
            "/redmine/attachments/download/2247/tomcat_deploy_contractManager.jpg",
            "/redmine/attachments/download/2248/contractManager.war",
            "/redmine/attachments/download/2252/sample_contract.jpg",
            "/redmine/attachments/download/2266/IP_notification2Orion.png",
            "/redmine/attachments/download/2574/ContractManager_Domain_Model.jpg"
        ],
        "Open Source": "",
        "Contact Person": "\n<p>\n Massimiliano Nigrelli (Engineering Ingegneria Informatica S.p.A.) -\n <a class=\"email\" href=\"mailto:massimiliano.nigrelliREMOVE-NO-SPAM@eng.it\">\n  massimiliano.nigrelliREMOVE-NO-SPAM@eng.it\n </a>\n <br/>\n Leandro Lombardo (Engineering Ingegneria Informatica S.p.A.) -\n <a class=\"email\" href=\"mailto:leandro.lombardoREMOVE-NO-SPAM@eng.it\">\n  leandro.lombardoREMOVE-NO-SPAM@eng.it\n </a>\n <br/>\n Dario Pellegrino (Engineering Ingegneria Informatica S.p.A.) -\n <a class=\"email\" href=\"mailto:dario.pellegrinoREMOVE-NO-SPAM@eng.it\">\n  dario.pellegrinoREMOVE-NO-SPAM@eng.it\n </a>\n</p>\n\n",
        "Overview": "\n\n<h3>\n What you get\n</h3>\n\n<p>\n ContractManger is a REST service (developed in Java) which translates the incentives included in an IncentivePlan into a new Contract proposal that will be saved into an ORION Context Broker GE instance.\n</p>\n\n<p>\n This component can be eventually re-used and customized to fulfill the general need of having a REST service which is connected to the ORION GE.\n</p>\n\n\n<h3>\n Why to get it\n</h3>\n\n<p>\n A reference implementation of a REST service which is connected to the ORION GE.\n</p>\n\n\n<h3>\n Target Usage\n</h3>\n\n<ul>\n <li>\n  Within an Energy Marcketplace, it can represent a tool to automatically translate IncentivePlans into Contract proposals for final customers.\n </li>\n <li>\n  Third-party applications (such as those developed by SMEs involved in Phase3)\n </li>\n</ul>\n\n\n",
        "Downloads": "\n<table class=\"themed\">\n <tr class=\"top\">\n  <td>\n   Location\n  </td>\n  <td>\n   Revision\n  </td>\n  <td>\n   Release Date\n  </td>\n </tr>\n <tr>\n  <td>\n   <a class=\"external\" href=\"files/contractManager.war\">\n    contractManager.war\n   </a>\n  </td>\n  <td>\n   version=0.0.1-SNAPSHOT\n  </td>\n  <td>\n   Fri Feb 20 11:02:19 CET 2015\n  </td>\n </tr>\n</table>\n\n\n",
        "Instances": "\n<p>\n An instance of this DSE reference implementation runs as a part of the trial and is not publicly accessible.\n</p>\n\n\n"
    }
]