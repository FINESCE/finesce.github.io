[
    {
        "Last Update": "2015-09-01",
        "Target Usage": "",
        "Name": "FINESCE API Mediator (FAM) DSE",
        "Short Description": "",
        "Documentation": {
            "Description": "\n\n<h3>\n Basic Concepts\n</h3>\n\n<p>\n Closely tied to the FINESCE Project outcome as a whole, the FINESCE API is envisioned to constitute, in the future, a de facto standard for data exchange in the framework of web services for smart energy. Since such a communications format standard should not expose heterogeneous sets of APIs, a proper convergence infrastructure should be defined to cope with client API heterogeneity and provide a homogeneous way of accessing web services related to smart energy infrastructures. The scope of FAM is to foster FINESCE API definition through the delivery of a mediation layer that allows for homogenizing access to smart energy infrastructures and exposing their capabilities in a concrete, well-known manner.\n</p>\n\n<p>\n As the intention of the FAM is to be loosely coupled to FINESCE project itself, it should be able to be easily configured to interact with any Smart Energy Web Service (SEWS) data source that exposes (part of) the FINESCE API. Therefore, a simple, proxy solution mapping the FINESCE distinct WP APIs to the FINESCE global one is not acceptable. Instead, a mechanism that facilitates the adoption of the FINESCE API by external, non-FINESCE related infrastructures should be sought. To this end, FAM will be based on the deployment of a Mediator GE instance [1], customized to provide exclusive mediation services to SEWS that expose FINESCE API-related functionality. In this context, the distinct FINESCE WP APIs will act as showcases of the usage of FAM or, else, as simple SEWS.\n</p>\n\n\n<h3>\n Basic Design Principles\n</h3>\n\n<p>\n Constituting a specification of the Mediator GE, the architecture of FAM is depicted in Figure 1.\n</p>\n\n<p style=\"text-align:center;\">\n <img alt=\"\" src=\"images/redmine/FAMArchitecture.png\" style=\"height:400px;\" class=img-responsive />\n <br/>\n Figure 1: FINESCE API Mediator DSE Architecture\n</p>\n\n<p>\n According to the envisioned architecture, two actors are expected to use the FAM DSE, the first one being the SEWS infrastructure operator and the second one being the actual user of the SEWS. A SEWS infrastructure operator willing to use FAM DSE mediation capabilities is expected to provide a mapping of the specification of its own SEWS to the FINESCE API equivalent subset; this will enable the transformation of the FINESCE API requests/responses, to the SEWS respective definitions. Furthermore, an appropriate service endpoint should be defined that will act as a point of message relay between FAM and the SEWS in hand.\n</p>\n\n<p>\n In the absence of FAM DSE, the end user would normally connect directly to the SEWS to get the services she requires. The role of FAM is to hide the heterogeneity of the different SEWS known to it and provide to the end user a single point of entry to desired SEWS; the FINESCE API interface. The Mediator GE, along with the provided specific FINESCE API adaptation, undertakes both the transformation of the FINESCE API compatible requests of the end users to the format defined by the requested SEWS and the routing of the request to the appropriate SEWS endpoint.\n</p>\n\n<p>\n A simplified UML sequence diagram of the mediation process that takes place within FAM is presented in Figure 2.\n</p>\n\n<p style=\"text-align:center;\">\n <img alt=\"\" src=\"images/redmine/APIDSESequence.png\" style=\"height:400px;\" class=img-responsive />\n <br/>\n Figure 2: Simplified API mediation sequence diagram\n</p>\n\n<p>\n FAM is meant to be able to be instantiated and run inside a VM in a FI-WARE compatible infrastructure. Being based on the Mediator GE reference implementation [1], the hardware and software requirements of FAM are expected to be identical to the ones of Mediator GE [2], except for the FINESCE API specification bindings that will be developed to implement an instance of the FINESCE API. Evidently, anyone willing to use FAM should be able to deploy her own FAM instance. However, the architectural description suggests that a single FAM instance should be able to simultaneously provide mediation tasks to numerous SEWS, an approach in general agreement to the overall Mediator GE standpoint [1].\n</p>\n\n\n<h3>\n DSE interwork\n</h3>\n\n<p>\n FAM DSE mediates the output of the entirety of functionalities offered by the FINESCE trials, thus interacting with all FINESCE DSEs.\n</p>\n\n\n<h3>\n GE Dependencies\n</h3>\n\n<p>\n FAM DSE may be built upon the Mediator GE (version of 31/07/2013. The GE has been dropped from FIWARE Catalogue) or can rely on a fresh Apache Camel 2.14.x installation.\n</p>\n\n\n",
            "Copyright": "\n<p>\n Copyright \u00a9 2015 by FINESCE\n</p>\n\n\n",
            "Glossary": "\n<table class=\"themed\">\n <tr class=\"top\">\n  <th>\n   Abbreviation\n  </th>\n  <th>\n   Full Name\n  </th>\n  <th>\n   Description\n  </th>\n </tr>\n <tr>\n  <td style=\"text-align:center;\">\n   DSE\n  </td>\n  <td style=\"text-align:center;\">\n   Domain Specific Enabler\n  </td>\n  <td>\n   A web service that can be re-used like a Generic Enabler, in a Domain Specific manner.\n  </td>\n </tr>\n <tr>\n  <td style=\"text-align:center;\">\n   FAM\n  </td>\n  <td style=\"text-align:center;\">\n   FINESCE API Mediator\n  </td>\n  <td>\n   A simple mediation service that allows for easy exploitation of the FINESCE API specification.\n  </td>\n </tr>\n <tr>\n  <td style=\"text-align:center;\">\n   SEWS\n  </td>\n  <td style=\"text-align:center;\">\n   Smart Energy Web Service\n  </td>\n  <td>\n   An infrastructure that provides web services in the framework of the Smart Energy site. Could be a FINESCE Trial or a third-party web service serving a Smart Grid site.\n  </td>\n </tr>\n</table>\n\n\n",
            "References": "\n<p>\n [1] Mediator GE  - Architecture Description,\n <a class=\"external\" href=\"http://forge.fi-ware.org/plugins/mediawiki/wiki/fiware/index.php/FIWARE.ArchitectureDescription.Apps.Mediator\">\n  http://forge.fi-ware.org/plugins/mediawiki/wiki/fiware/index.php/FIWARE.ArchitectureDescription.Apps.Mediator\n </a>\n <br/>\n [2] Mediator GE \u2013 Installation and administration guide,\n <a class=\"external\" href=\"http://forge.fi-ware.org/plugins/mediawiki/wiki/fiware/index.php/Mediator_-_Installation_and_Administration_Guide\">\n  http://forge.fi-ware.org/plugins/mediawiki/wiki/fiware/index.php/Mediator_-_Installation_and_Administration_Guide\n </a>\n <br/>\n [3] Apiary website,\n <a class=\"external\" href=\"http://www.apiary.io/\">\n  http://www.apiary.io/\n </a>\n <br/>\n [4] The move Database API \u2013 Apiary,\n <a class=\"external\" href=\"http://docs.themoviedb.apiary.io/\">\n  http://docs.themoviedb.apiary.io/\n </a>\n <br/>\n [5] Apache Synapse - The lightweight ESB,\n <a class=\"external\" href=\"https://synapse.apache.org/\">\n  https://synapse.apache.org/\n </a>\n <br/>\n [6] Apache Camel,\n <a class=\"external\" href=\"https://camel.apache.org/\">\n  https://camel.apache.org/\n </a>\n <br/>\n [7]\n <a class=\"external\" href=\"https://130.206.82.22/finesce/api/docs\">\n  https://130.206.82.22/finesce/api/docs\n </a>\n <br/>\n [8] FINESCE API - Apiary -\n <a class=\"external\" href=\"http://docs.fam.apiary.io\">\n  http://docs.fam.apiary.io\n </a>\n <br/>\n [9] Swagger -\n <a class=\"external\" href=\"http://swagger.io/\">\n  http://swagger.io/\n </a>\n</p>\n\n\n",
            "Details": "\n<p>\n The FINESCE API will be presented in the FINESCE project wiki, as will the rest of the DSEs provided in the framework of the FINESCE project. In order to enable faster development acceptance, the FINESCE API will be published on the API-handling web service called APIARY [3], too. The publication of the FINESCE API on Apiary web service is considered ideal both for quickly exploring the FINESCE API specification and for experimenting with the FAM DSE instance that will be available upon API specification and FAM development completion. What distinguishes Apiary as a complementary option than simply publishing the API to the wiki, is that it inherently provides ways of interacting with an API and inspecting the relevant HTTP traffic flows, as soon as one specifies the API in a concrete manner. Moreover, it provides tools for the automatic generation of code that will use the web services specified by an API, in different programmatic languages, in order to facilitate the consumption of the services advertised through the API in hand (in the case of FINESCE, it is the FINESCE API). Finally, as Apiary can act as a proxy between an API end user and a real web service exposing the API in hand, it can be used as a user experimentation platform, without necessitating the development of the full range of tools normally needed to claim reasonable API exploitation. An indicative (featured) example of API highlighting using APIARY is available at [4], whereas an initial FAM DSE specification example is available at [8].\n</p>\n\n<p>\n Apart from APIARY, the same set of specifications is available at Swagger format  the latter constituting a well known web-service aiming at providing well structured access to RESTful web services [9]. An initial, relative FAM DSE specification example is available at [8].\n</p>\n\n\n",
            "Preface": "\n<p>\n This document presents the FINESCE API Mediator (FAM) Domain Specific Enabler (DSE), a service that aims at facilitating the usage of the FINESCE API from third party entities. Note that\n <strong>\n  FAM DSE is not the API itself\n </strong>\n but, rather, it is a reference implementation of a service exposing the FINESCE API specification. In other words, FAM is a DSE offering data mediation services through interfaces compatible with the FINESCE API specification.\n</p>\n\n<p>\n Please consult the appropriate pages on the\n <a class=\"external\" href=\"http://www.finesce.eu/Trial_Site_Terni.html\">\n  FINESCE\n </a>\n website in order to understand the complete context of the related FINESCE trials and this DSE.\n</p>\n\n\n",
            "ReutilisedTech": "\n<p>\n Apache Camel, packaged under the form of the Mediator GE has been used. Please refer to [1] for details and specifications.\n</p>\n\n\n"
        },
        "Version": "v0.1",
        "WP": "",
        "Usage": "\n\n<h3>\n Address/Protocol\n</h3>\n\n<p>\n Since FAM exposes the full functionality of FINESCE API, its endpoints are the ones determined through the specification presented in the Deliverable D7.7 (see\n <a class=\"external\" href=\"files/D7.7%20Finesce%20API%20Handbook%20v1.0.pdf\">\n  attached\n </a>\n ) or\n <a class=\"external\" href=\"http://finesce.eu/global/images/cms/Results/Finesce_D7.7_API%20Handbook_v1.0.pdf\">\n  link\n </a>\n .\n</p>\n\n\n\nThe following HTTP commands being used to manipulate the data controlled by the DSE:\n\t<ul>\n <li>\n  HTTP GET commands used to retrieve information from a SEWS\n </li>\n <li>\n  HTTP POST to add new information to a SEWS\n </li>\n</ul>\n\n<p>\n Current implementation details regarding the supported addresses and methods can be found at\n <a class=\"external\" href=\"https://130.206.82.22/finesce/api/docs\">\n  docs\n </a>\n and\n <a class=\"external\" href=\"http://docs.fam.apiary.io\">\n  the FINESCE Apiary\n </a>\n .\n</p>\n\n\n<h3>\n Commands\n</h3>\n\n<p>\n Most of the supported endpoints are invoked using the GET HTTP command. The only endpoints that should be invoked with POST, are the ones that are related to user authentication (see the following list of endpoints).\n</p>\n\n\n<h3>\n Endpoints\n</h3>\n\n<p>\n The complete set of endpoints can be found at the current DSE documentation services, namely at\n <a class=\"external\" href=\"https://130.206.82.22/finesce/api/docs\">\n  docs\n </a>\n and\n <a class=\"external\" href=\"http://docs.fam.apiary.io\">\n  the FINESCE Apiary\n </a>\n , and is also quoted below:\n</p>\n\n<pre>\nGET /Aachen/factory/equipment/machines\nGET /Aachen/factory/equipment/machines/{machine_id}\nPOST /Aachen/tokens\nGET /Aachen/vpp/components\nGET /Aachen/vpp/{comp_type}/{comp_id}/data\nGET /Aachen/vpp/{comp_type}/{comp_id}/measurements/{measurements_date}\nGET /Aachen/vpp/{comp_type}/{comp_id}/predictions/{predictions_date}\nGET /Horsens/buildings\nGET /Horsens/buildings/measurement_types\nGET /Horsens/buildings/measurement_types/id/{id}\nGET /Horsens/buildings/measurement_types/type/{type}\nGET /Horsens/buildings/{id}\nGET /Horsens/buildings/{id}/measurement_types\nGET /Horsens/buildings/{id}/measurements/{type_id}/{from}/{to}\nPOST /Horsens/tokens/refresh\nPOST /Horsens/tokens\nGET /Horsens/vehicles\nGET /Horsens/vehicles/measurement_types\nGET /Horsens/vehicles/measurement_types/id/{id}\nGET /Horsens/vehicles/measurement_types/type/{type}\nGET /Horsens/vehicles/{id}\nGET /Horsens/vehicles/{id}/measurement_types\nGET /Horsens/vehicles/{id}/measurements/{type_id}/{from}/{to}\nGET /Ireland/algoweights\nGET /Ireland/algoweights/{id}\nGET /Ireland/charging_modes\nGET /Ireland/charging_modes/{id}\nGET /Ireland/charging_modes/{id}/evses\nGET /Ireland/charging_modes/{id}/evtypes\nGET /Ireland/charging_states\nGET /Ireland/charging_states/{id}\nGET /Ireland/connection_states\nGET /Ireland/connection_states/{id}\nGET /Ireland/connections\nGET /Ireland/connections/{id}\nGET /Ireland/connections/{id}/charging_mode\nGET /Ireland/connections/{id}/connection_state\nGET /Ireland/energy/regional\nGET /Ireland/energy/regional/avg\nGET /Ireland/energy/regional/avg/{id}\nGET /Ireland/energy/regional/{id}\nGET /Ireland/energy/regional/{id}/region\nGET /Ireland/energy/regional/{id}/timeslot\nGET /Ireland/regions\nGET /Ireland/regions/{id}\nGET /Ireland/regions/{id}/algoweights\nGET /Ireland/regions/{id}/energy\nGET /Ireland/regions/{id}/energy/avg\nGET /Ireland/regions/{id}/supply_equipment\nGET /Ireland/supply_equipment\nGET /Ireland/supply_equipment/{id}\nGET /Ireland/supply_equipment/{id}/charging_modes\nGET /Ireland/supply_equipment/{id}/connections\nGET /Ireland/timeslots\nGET /Ireland/timeslots/{id}\nGET /Ireland/timeslots/{id}/algoweights\nGET /Ireland/timeslots/{id}/charging_states\nGET /Ireland/timeslots/{id}/energy/regional\nPOST /Ireland/tokens/refresh\nPOST /Ireland/tokens\nGET /Ireland/vehicle_types\nGET /Ireland/vehicle_types/{id}\nGET /Ireland/vehicle_types/{id}/charging_modes\nGET /Ireland/vehicle_types/{id}/vehicles\nGET /Ireland/vehicles\nGET /Ireland/vehicles/{id}\nGET /Ireland/vehicles/{id}/connections\nGET /Madrid/buildings/{id}/modules\nGET /Madrid/buildings/{id}/modules/inverter/*/PowerMixed/{date}\nGET /Madrid/buildings/{id}/modules/pv/*/PowerSupply/{date}\nGET /Madrid/buildings/{id}/modules/{module_type}/{module_id}/status/{date}\nGET /Madrid/buildings/{id}/zones/{date}\nGET /Madrid/buildings/{id}/zones/{zone_id}/{measurement_type}/{date}\nGET /Madrid/weather/available_descriptors\nGET /Madrid/weather/{descriptor}/{from}/{to}\nGET /Madrid/weather/{descriptor}/{from}/{to}/{number_of_measurements}\nGET /Malmo/prices\nGET /Malmo/prices/locations\nGET /Malmo/prices/locations/data\nGET /Malmo/prices/locations/data/{name}\nGET /Malmo/prices/locations/data/{name}/values/{from}/{to}\nGET /Malmo/prices/locations/{name}\nGET /Malmo/prices/{from}/{to}\nGET /Malmo/prices/{name}\nGET /Malmo/prices/{name}/{from}/{to}\nPOST /Malmo/tokens\nGET /Malmo/weather/available_descriptors\nGET /Malmo/weather/{descriptor}/{from}/{to}\nGET /Malmo/weather/{from}/{to}\nGET /Terni/contracts/customer/{customer}\nGET /Terni/contracts/customer/{customer}/state/{state}\nGET /Terni/contracts/prices\nGET /Terni/contracts/state/{state}\nGET /Terni/dsm/ip/author/{author}\nGET /Terni/dsm/ip/author/{author}/state/{state}\nGET /Terni/dsm/ip/state/{state}\nGET /Terni/dsm/irp/author/{author}\nGET /Terni/dsm/irp/author/{author}/state/{state}\nGET /Terni/dsm/irp/state/{state}\nGET /Terni/energy/consumption/profile/sector/{sector}/{from}/{to}\nGET /Terni/energy/consumption/profile/user/{customer_id}/{from}/{to}\nGET /Terni/energy/consumption/total/user/{customer_id}/{from}/{to}\nGET /Terni/energy/production/profile/sector/{sector}/{from}/{to}\nGET /Terni/energy/production/profile/user/{customer_id}/{from}/{to}\nGET /Terni/energy/production/total/user/{customer_id}/{from}/{to}\nGET /Terni/meters\nGET /Terni/meters/sectors\nGET /Terni/meters/{search_options}\nGET /Terni/power/demand/user/{customer_id}/{from}/{to}\nGET /Terni/power/supply/user/{customer_id}/{from}/{to}\nGET /Terni/simulation/prediction/power/demand/sector/{sector_id}\nGET /Terni/simulation/prediction/power/demand/user/{customer_id}\nGET /Terni/simulation/prediction/power/supply/sector/{sector_id}\nGET /Terni/simulation/prediction/power/supply/user/{customer_id}\nGET /Terni/social\nGET /Terni/social/{events_number}\nPOST /Terni/tokens\nGET /Terni/weather/available_descriptors\nGET /Terni/weather/{descriptor}/{from}/{to}\nGET /Terni/weather/{from}/{to}\n</pre>\n\n<p>\n Note that all the above are relative endpoints and are meant to be tied to the base endpoint URL.\n <br/>\n In the case of FINESCE reference implementation, the base URL is\n</p>\n<pre>https://130.206.82.22/finesce/api/v0.1</pre>\n<br/>\nHence, in order to get a token from e.g. Terni, one should perform a POST HTTP request to <pre>https://130.206.82.22/finesce/api/v0.1/Terni/tokens</pre>\n<br/>\nPlease, use <a class=\"external\" href=\"https://130.206.82.22/finesce/api/docs\">\n https://130.206.82.22/finesce/api/docs\n</a>\n and <a class=\"external\" href=\"http://docs.fam.apiary.io\">\n the FINESCE Apiary\n</a>\n for details and options documentation.\n\n\n\t\n<h3>\n Configuration\n</h3>\n\n\n<h4>\n Maven Configuration\n</h4>\n\n<p>\n The first configuration point of the DSE is the POM XML file of the sources.\n <br/>\n There, the build environment of the DSE can be managed, marked within the tags &lt;build&gt;...&lt;/build&gt;.\n <br/>\n The first configuration option is the name of the war file produced when building it (see installation instructions for details on how to build the war file). This can be tuned by editing the value of the &lt;finalName&gt; element. By default, the war filename is set to\n</p>\n\n<pre>\nfinesce#api#v${project.version}\n</pre>\n\n<p>\n The '#' inside the filename are used to ensure that the request base URL will be of type &lt;IP&gt;/finesce/api/vY.Z, where Y.Z is the version of the API specification used (currently only 0.1 is available). The version of the API is parametrized as ${project.version}, and can be controlled by changing the &lt;version&gt; element of the POM file.\n</p>\n\n<p>\n If one wants to run a maven command to build the war file and upload it to a specific Tomcat 7 server, then the tomcat maven plugin should be configured. The configuration options (path, url, server and httpsPort) lie under the structure:\n</p>\n\n<pre>\n&lt;plugins&gt;\n    &lt;plugin&gt;\n        &lt;groupId&gt;org.apache.tomcat.maven&lt;/groupId&gt;\n        &lt;artifactId&gt;tomcat7-maven-plugin&lt;/artifactId&gt;\n        &lt;version&gt;2.2&lt;/version&gt;\n        &lt;configuration&gt;\n            &lt;path&gt;/finesce/api/v${project.version}&lt;/path&gt;\n            &lt;url&gt;https://130.206.82.22/manager/text&lt;/url&gt;\n            &lt;server&gt;filab&lt;/server&gt;\n            &lt;httpsPort&gt;443&lt;/httpsPort&gt;\n        &lt;/configuration&gt;\n    &lt;/plugin&gt;\n&lt;/plugins&gt;\n</pre>\n\n<p>\n The path variable controls the deployment path (in this case it is the same as implied by the war filename, namely /finesce/api/vY.Z, where Y.Z is the version of the API), the url variable controls the URL of the Tomcat 7 manager application endpoint for uploads (for Tomcat 7.x this is &lt;IP&gt;/manager/text). The httpsPort determines the port of the https service (if SSL is enabled). Last, the server variable points at the maven server configured in the user's maven configuration (under the path &lt;maven_directory&gt;/conf/settings.xml, see\n <a class=\"external\" href=\"https://maven.apache.org/settings.html\">\n  settings.html\n </a>\n for details on how to configure maven). In the case of the DSE implementation, the relevant configuration of the settings.xml file is:\n</p>\n\n<pre>\n&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n\n&lt;settings xmlns=\"http://maven.apache.org/SETTINGS/1.0.0\" \n          xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" \n          xsi:schemaLocation=\"http://maven.apache.org/SETTINGS/1.0.0 http://maven.apache.org/xsd/settings-1.0.0.xsd\"&gt;\n\n    &lt;servers&gt;\n        &lt;server&gt;\n            &lt;id&gt;filab&lt;/id&gt;\n            &lt;username&gt;username&lt;/username&gt;\n            &lt;password&gt;password&lt;/password&gt;\n        &lt;/server&gt;\n    &lt;/servers&gt;\n&lt;/settings&gt;\n</pre>\n\n<p>\n where id indicates an alias for the server and the values of username/password should be exactly the same as the Tomcat 7 user configuration for the manager app (see\n <a class=\"external\" href=\"https://tomcat.apache.org/tomcat-7.0-doc/manager-howto.html\">\n  manager-howto.html\n </a>\n for details on how to configure Tomcat 7 manager app correctly).\n</p>\n\n<p>\n Note that if the IP of the installation server is changed (which is most likely), one should perform appropriate changes in the src/main/webapp/WEB-INF/web.xml file in order to get Swagger up and running. Specifically, one should properly change the base.path and api.path values, in order to match the new base URLs.\n</p>\n\n\n<h4>\n Endpoints configuration\n</h4>\n\n<p>\n The second configuration point of the DSE is related to the endpoints supported by the DSE.\n <br/>\n Assuming that the user has downloaded the sources under the path /home/user and has deflated the compressed file, then, there should exist the following directory listing:\n</p>\n\n<pre>\nsrc\n\u251c\u2500\u2500 main\n\u2502   \u251c\u2500\u2500 java\n\u2502   \u2502   \u2514\u2500\u2500 eu\n\u2502   \u2502       \u2514\u2500\u2500 finesce\n\u2502   \u2502           \u251c\u2500\u2500 api\n|   |           |\n.   .           .\n.   .           .\n.   .           .\n\u2502   \u2502           \u251c\u2500\u2500 routing\n\u2502   \u2502           \u2502   \u251c\u2500\u2500 FailureHTTPResponseProcessor.java\n\u2502   \u2502           \u2502   \u251c\u2500\u2500 wp1\n\u2502   \u2502           \u2502   \u2502   \u251c\u2500\u2500 Desc.java\n\u2502   \u2502           \u2502   \u2502   \u251c\u2500\u2500 TrialRoutes.java\n\u2502   \u2502           \u2502   \u2502   \u2514\u2500\u2500 TrialService.java\n\u2502   \u2502           \u2502   \u251c\u2500\u2500 wp2\n\u2502   \u2502           \u2502   \u2502   \u251c\u2500\u2500 horsens\n\u2502   \u2502           \u2502   \u2502   \u2502   \u251c\u2500\u2500 Desc.java\n\u2502   \u2502           \u2502   \u2502   \u2502   \u251c\u2500\u2500 TrialRoutes.java\n\u2502   \u2502           \u2502   \u2502   \u2502   \u2514\u2500\u2500 TrialService.java\n\u2502   \u2502           \u2502   \u2502   \u2514\u2500\u2500 madrid\n\u2502   \u2502           \u2502   \u2502       \u251c\u2500\u2500 Desc.java\n\u2502   \u2502           \u2502   \u2502       \u251c\u2500\u2500 TrialRoutes.java\n\u2502   \u2502           \u2502   \u2502       \u2514\u2500\u2500 TrialService.java\n\u2502   \u2502           \u2502   \u251c\u2500\u2500 wp3\n\u2502   \u2502           \u2502   \u2502   \u251c\u2500\u2500 Desc.java\n\u2502   \u2502           \u2502   \u2502   \u251c\u2500\u2500 TrialRoutes.java\n\u2502   \u2502           \u2502   \u2502   \u2514\u2500\u2500 TrialService.java\n\u2502   \u2502           \u2502   \u251c\u2500\u2500 wp4\n\u2502   \u2502           \u2502   \u2502   \u251c\u2500\u2500 Desc.java\n\u2502   \u2502           \u2502   \u2502   \u251c\u2500\u2500 TrialRoutes.java\n\u2502   \u2502           \u2502   \u2502   \u2514\u2500\u2500 TrialService.java\n\u2502   \u2502           \u2502   \u2514\u2500\u2500 wp5\n\u2502   \u2502           \u2502       \u251c\u2500\u2500 Desc.java\n\u2502   \u2502           \u2502       \u251c\u2500\u2500 TrialRoutes.java\n\u2502   \u2502           \u2502       \u2514\u2500\u2500 TrialService.java\n\u2502   \u2502           \u251c\u2500\u2500 trials\n|   |           |\n.   .           .\n.   .           .\n.   .           .\n</pre>\n\n<p>\n namely, under the directory src/main/eu/finesce/routing there should exist a single directory (java package) for each trial.\n <br/>\n Inside each trial directory, there should exist three (3) files, one called Desc.java, one called TrialRoutes.java and one called TrialService.java.\n <br/>\n The Desc.java file always has a syntax similar to the following:\n</p>\n\n<pre>\npublic class Desc {\n    public static final String    NAME          = \"Trial_name\";\n    public static final String    BASE_URL      = \"http://trial-site-base-endpoint-url/\";\n    public static final String    API_VERSION   = \"0.1\";\n    public static final String    TRIAL_WP      = \"finesce-wpX\";\n\n    public static final String    SERVICE_1_URL = \"service_1\";\n    public static final String    SERVICE_1_URL = \"service_2\";\n    public static final String    SERVICE_1_URL = \"service_3\";\n    public static final String    SERVICE_1_URL = \"service_4\";\n}\n</pre>\n\n<p>\n namely, it indicates the URLs that the Mediator should use in order to redirect a FINESCE-API compatible endpoint to a trial-site-API endpoint.\n <br/>\n This correspondence is used by the Camel Routes implemented in the TrialRoutes.java source file. Indicatively, assuming that a user wants to invoke the FINESCE API endpoint\n <a class=\"external\" href=\"https://130.206.82.22/finesce/api/v0.1/Trial_name/SERVICE_1_URL\">\n  SERVICE_1_URL\n </a>\n , the Mediator will translate it as:\n</p>\n\n<pre>\nhttps://130.206.82.22/finesce/api/v0.1/Trial_name/SERVICE_1_URL --&gt; http://trial-site-base-endpoint-url/service_1\n</pre>\n\n<p>\n Assuming that a user wants to configure/change the redirections and translations performed, then, proper changes in the TrialRoutes.java and TrialService.java, respectively, should be performed.\n <br/>\n In this case, the user should be familiar with Camel Routes programming, especially using the REST DSL, as documented in\n <a class=\"external\" href=\"http://camel.apache.org/rest-dsl.html\">\n  rest-dsl.html\n </a>\n .\n</p>\n\n\n<h3>\n Building and Installation instructions\n</h3>\n\n<p>\n In order to create your own FINESCE API Mediator DSE instance, place the DSE compiled war file under the webapps directory of an Apache Tomcat 7.0.X instance (for Ubuntu machines, the path is /var/lib/tomcat7/webapps).\n</p>\n\n<p>\n To build from source, extract the DSE source file, then build the war with maven. Assuming that the downloaded sources file is named finesce#api#v0.1-sources.tar.gz, in an Ubuntu server the following commands should be issued:\n</p>\n\n<pre>\n$ cd &lt;download_directory&gt;\n$ tar xzf finesce#api#v0.1-sources.tar.gz\n$ cd finesce#api#v0.1-sources/\n$ mvn install\n$ sudo cp target/finesce#api#v0.1.war /var/lib/tomcat7/webapps\n</pre>\n\n<p>\n Assuming that the building environment is outside the deployment server and the tomcat maven plugin has been properly configured (see paragraph related to Maven configuration), the following commands should be issued:\n</p>\n\n<pre>\n$ cd &lt;download_directory&gt;\n$ tar xzf finesce#api#v0.1-sources.tar.gz\n$ cd finesce#api#v0.1-sources/\n$ mvn tomcat7:redeploy\n</pre>\n\n\n<h3>\n Examples of usage\n</h3>\n\n<p>\n Suppose that one has signed NDAs for the trial sites of Ireland and Horsens and wants to get information about the vehicles in these two trials.\n <br/>\n First, one needs to login, so a POST request should be performed to get an authentication token from both trial sites. Let's start with the Irish trial:\n</p>\n\n<pre>\ncurl --include \\\n     --request POST \\\n     --header \"Accept: application/json\" \\\n     --header \"Content-Type: application/json\" \\\n     --data-binary \"{\n    \\\"authorization_id\\\":\\\"an_auth_id\\\",\n    \\\"password\\\":\\\"a_password\\\" \n}\" \\\n'https://130.206.82.22/finesce/api/v0.1/Ireland/tokens' -k\n</pre>\n\n<p>\n The response should be something like the following:\n</p>\n\n<pre>\nHTTP/1.1 200 OK\nAccept: application/json\nContent-Type: application/json\nTransfer-Encoding: chunked\n\n{\n  \"metadata\" : {\n    \"api_version\" : \"0.1\",\n    \"trial\" : \"Ireland\",\n    \"created\" : \"2015-06-26T17:59:24+02:00\",\n    \"updated\" : \"2015-06-26T17:59:24+02:00\" \n  },\n  \"expires\" : \"2015-06-26T23:59:10+00:00\",\n  \"role\" : \"read\",\n  \"token\" : \"eyJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJnY3AiLCJhdWQiOiJodHRwOi8vbG9jYWxob3N0OjgwODAiLCJpYXQiOjE0MzUzMzQzNTAsIm5iZiI6MTQzNTMzNDI5MCwiZXhwIjoxNDM1MzYzMTUwLCJqdGkiOiI1MTQ2MmIyNy0wNTNmLTRjNjYtYjI3Zi0yYzU2NDU0MTBkNTUiLCJodHRwOi8vZ2NwLnRlbGVrb20uZGUvYXhzY2hlbWEvZ2NwaWQiOiIyMDEwMTAwMDAxODE5MDA3MjE4OTMwNzUwMzIzIiwiaHR0cDovL2djcC50ZWxla29tLmRlL2F4c2NoZW1hL3N0YXR1cyI6IkNPTkZJUk1FRCJ9.nO-wzmVfCKlOGK2DFTnFthX65ShDieY4NwwC7YWPhdY\",\n  \"refresh_token\" : \"oFC1sZBYB7esLCddppuB-DVx7ZZTvo50kzdKY9XNRWnay6l_\" \n}\n</pre>\n\n<p>\n Note that the authentication token is the \"token\" field of the response.\n <br/>\n Having acquired an authentication token for the Irish site, we can authenticate against the Danish one (Horsens):\n</p>\n\n<pre>\ncurl --include \\\n     --request POST \\\n     --header \"Accept: application/json\" \\\n     --header \"Content-Type: application/json\" \\\n     --data-binary \"{\n    \\\"authorization_id\\\":\\\"another_auth_id\\\",\n    \\\"password\\\":\\\"another_password\\\" \n}\" \\\n'https://130.206.82.22/finesce/api/v0.1/Horsens/tokens' -k\n</pre>\n\n<p>\n And the response should be something like:\n</p>\n\n<pre>\nHTTP/1.1 200 OK\nAccept: application/json\nContent-Type: application/json;charset=UTF-8\nTransfer-Encoding: chunked\n\n{\n  \"metadata\" : {\n    \"api_version\" : \"0.1\",\n    \"trial\" : \"Horsens\",\n    \"created\" : \"2015-06-26T18:10:25+02:00\",\n    \"updated\" : \"2015-06-26T18:10:25+02:00\" \n  },\n  \"expires\" : \"2015-06-26T18:40:25+02:00\",\n  \"role\" : \"bearer\",\n  \"token\" : \"14XL86A8FBDBTd_wC-dLaLB-vpzR0BmawfKU7T-jrGvdJJDnGaxeykYOAcfH0zDetGRsj_aWufvZClmQVWTKDptSdsxk8wD61-Kx2uW6bxCGIeqeZej_Kb3dCpusYi4Se2XErpjUmuWU_Dx-lyp-dCJtWQwmooZk6uclnWWHMVMxsaPVdHGhKVzMD_UZF-7vxhbo5tgsn-ADakB_bNIKbAmbXYqShCraDPCfI1B3ALAXDb6f0445B1CVC8NC3bGinwaoWc56Wfd9L5fyUKMjuv3OiJq1_U_xyUnOZbEUEP9CLrSNa3SI5o7lohf1AnbpGcY5Q8YO6eBpNlA5Zs5e_RQHNkWl6ENjorGGzH1CZaROF3jKopk-qs-htyhne_xZo0IlhMqzeQBImErVi1LAhBdl_0xcJWE8L50UKeWrGPE88zpDhXy1MA_Y1OrT-uKWevBSXSgBrFZwSStYMqMnjQeRjwi-_03JhXimEhSNaGfaaKtBXtQ35M5inIX3b7uXd7QwGA\",\n  \"refresh_token\" : \"4bf9a0b69bec42de986ab699bc60a75d\" \n}\n</pre>\n\n<p>\n Now that the authentication tokens for the two sites are available, the requests for the vehicles can be made by issuing the appropriate GET HTTP requests, setting the \"x-auth-token\" header values to the tokens acquired by the two sites:\n</p>\n\n<pre>\ncurl --request GET \\\n     --header \"Accept: application/json\" \\\n     --header \"x-auth-token: eyJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJnY3AiLCJhdWQiOiJodHRwOi8vbG9jYWxob3N0OjgwODAiLCJpYXQiOjE0MzUzMzQzNTAsIm5iZiI6MTQzNTMzNDI5MCwiZXhwIjoxNDM1MzYzMTUwLCJqdGkiOiI1MTQ2MmIyNy0wNTNmLTRjNjYtYjI3Zi0yYzU2NDU0MTBkNTUiLCJodHRwOi8vZ2NwLnRlbGVrb20uZGUvYXhzY2hlbWEvZ2NwaWQiOiIyMDEwMTAwMDAxODE5MDA3MjE4OTMwNzUwMzIzIiwiaHR0cDovL2djcC50ZWxla29tLmRlL2F4c2NoZW1hL3N0YXR1cyI6IkNPTkZJUk1FRCJ9.nO-wzmVfCKlOGK2DFTnFthX65ShDieY4NwwC7YWPhdY\" \\\n     'https://130.206.82.22/finesce/api/v0.1/Ireland/vehicles' -k\n</pre>\n\n<pre>\ncurl --request GET \\\n     --header \"Accept: application/json\" \\\n     --header \"x-auth-token: 14XL86A8FBDBTd_wC-dLaLB-vpzR0BmawfKU7T-jrGvdJJDnGaxeykYOAcfH0zDetGRsj_aWufvZClmQVWTKDptSdsxk8wD61-Kx2uW6bxCGIeqeZej_Kb3dCpusYi4Se2XErpjUmuWU_Dx-lyp-dCJtWQwmooZk6uclnWWHMVMxsaPVdHGhKVzMD_UZF-7vxhbo5tgsn-ADakB_bNIKbAmbXYqShCraDPCfI1B3ALAXDb6f0445B1CVC8NC3bGinwaoWc56Wfd9L5fyUKMjuv3OiJq1_U_xyUnOZbEUEP9CLrSNa3SI5o7lohf1AnbpGcY5Q8YO6eBpNlA5Zs5e_RQHNkWl6ENjorGGzH1CZaROF3jKopk-qs-htyhne_xZo0IlhMqzeQBImErVi1LAhBdl_0xcJWE8L50UKeWrGPE88zpDhXy1MA_Y1OrT-uKWevBSXSgBrFZwSStYMqMnjQeRjwi-_03JhXimEhSNaGfaaKtBXtQ35M5inIX3b7uXd7QwGA\" \\\n     'https://130.206.82.22/finesce/api/v0.1/Horsens/vehicles' -k\n</pre>\n\n<p>\n Note that the requests are identical, only differing in the trial name (in the service URL) and, of course, the authentication token value.\n <br/>\n Following this approach, an authorized entity can get information from all trials requiring authentication, namely Aachen (VPP trial), Ireland, Horsens, Malmo and Terni.\n</p>\n\n<p>\n For the trials that do not require authentication, namely Aachen (Smart Factory trial) and Madrid, information can be retrieved by simply issuing a proper GET HTTP request, without determining an \"x-auth-token\" header. Indicative, for the case of the Smart Factory trial:\n</p>\n\n<pre>\n$ curl --request GET \\\n&gt;      --header \"Accept: application/json\" \\\n&gt;      'https://130.206.82.22/finesce/api/v0.1/Aachen/factory/equipment/machines' -k\n</pre>\n\n<p>\n Yielding a response similar to the following:\n</p>\n\n<pre>\n{\n  \"metadata\" : {\n    \"api_version\" : \"0.1\",\n    \"trial\" : \"Aachen\",\n    \"created\" : \"2015-06-26T18:24:25+02:00\",\n    \"updated\" : \"2015-06-26T18:24:25+02:00\" \n  },\n  \"machines\" : [ {\n    \"id\" : \"000000000000\",\n    \"name\" : \"Factory Building Lateral\",\n    \"process\" : \"none\",\n    \"plc\" : \"none\",\n    \"monitor\" : \"SmartMeter (Kellendonk)\",\n    \"resolution\" : 1,\n    \"res_unit\" : \"minute\",\n    \"is_cumulative\" : true,\n    \"measurement\" : 0,\n    \"measurement_unit\" : \"Wh\",\n    \"status\" : \"operating\" \n  }, {\n    \"id\" : \"000000000172\",\n    \"name\" : \"Manual assembly stations\",\n    \"process\" : \"Assembly\",\n    \"plc\" : \"none\",\n    \"monitor\" : \"Secondary Distributor\",\n    \"resolution\" : 15,\n    \"res_unit\" : \"minute\",\n    \"is_cumulative\" : false,\n    \"measurement\" : 10,\n    \"measurement_unit\" : \"kWh\",\n    \"status\" : \"operating\" \n  }, {\n    \"id\" : \"000000000173\",\n    \"name\" : \"Momolinie 55.13\",\n    \"process\" : \"Assembly\",\n    \"plc\" : \"none\",\n    \"monitor\" : \"Secondary Distributer\",\n    \"resolution\" : 15,\n    \"res_unit\" : \"minute\",\n    \"is_cumulative\" : false,\n    \"measurement\" : 9,\n    \"measurement_unit\" : \"kWh\",\n    \"status\" : \"operating\" \n  }, {\n    \"id\" : \"000000000174\",\n    \"name\" : \"Ventilation and light\",\n    \"process\" : \"none\",\n    \"plc\" : \"none\",\n    \"monitor\" : \"Secondary Distributor\",\n    \"resolution\" : 15,\n    \"res_unit\" : \"minute\",\n    \"is_cumulative\" : false,\n    \"measurement\" : 2,\n    \"measurement_unit\" : \"kWh\",\n    \"status\" : \"operating\" \n  }, {\n    \"id\" : \"421ae4dafe73\",\n    \"name\" : \"TruDisk 4001\",\n    \"process\" : \"Laser Shaping (disk laser, 4kW)\",\n    \"plc\" : \"none\",\n    \"monitor\" : \"Weidmueller POWER MONITOR\",\n    \"resolution\" : 1,\n    \"res_unit\" : \"minute\",\n    \"is_cumulative\" : false,\n    \"measurement\" : 0,\n    \"measurement_unit\" : \"mWh\",\n    \"status\" : \"off\" \n  }, {\n    \"id\" : \"5d6642bf1941\",\n    \"name\" : \"TruBend 5085S\",\n    \"process\" : \"Bending\",\n    \"plc\" : \"TASC 6000\",\n    \"monitor\" : \"Siemens SENTRON PAC3200\",\n    \"resolution\" : 1,\n    \"res_unit\" : \"minute\",\n    \"is_cumulative\" : false,\n    \"measurement\" : 0,\n    \"measurement_unit\" : \"mWh\",\n    \"status\" : \"off\" \n  }, {\n    \"id\" : \"636a25e8bdcc\",\n    \"name\" : \"RV 60-60\",\n    \"process\" : \"3D Robot Welter\",\n    \"plc\" : \"none\",\n    \"monitor\" : \"Weidmueller POWER MONITOR\",\n    \"resolution\" : 1,\n    \"res_unit\" : \"minute\",\n    \"is_cumulative\" : false,\n    \"measurement\" : 0,\n    \"measurement_unit\" : \"mWh\",\n    \"status\" : \"off\" \n  }, {\n    \"id\" : \"6637d04c3e2c\",\n    \"name\" : \"TruLaser 5030 fiber\",\n    \"process\" : \"Laser Cutting (CO2, 5kW)\",\n    \"plc\" : \"Siemens Sinumerik 840D\",\n    \"monitor\" : \"Siemens SENTRON PAC3200\",\n    \"resolution\" : 1,\n    \"res_unit\" : \"minute\",\n    \"is_cumulative\" : false,\n    \"measurement\" : 0,\n    \"measurement_unit\" : \"mWh\",\n    \"status\" : \"off\" \n  } ]\n}\n</pre>\n\n<p>\n <strong>\n  Important Notice\n </strong>\n : As the DSE certificate is self-signed the switch \"-k\" is required for remotely invoking the DSE services using curl.\n</p>\n\n\n",
        "Terms and Conditions": "\n<p>\n Software associated to the FINESCE API Mediator DSE is provided as open source under the Apache v2.0 license. Please check the specific terms and conditions linked to this open source license at\n <a class=\"external\" href=\"http://www.apache.org/licenses/LICENSE-2.0\">\n  http://www.apache.org/licenses/LICENSE-2.0\n </a>\n</p>\n\n\n",
        "wiki_attachments": [
            "/redmine/attachments/download/1391/FAMArchitecture.png",
            "/redmine/attachments/download/1392/APIDSESequence.png",
            "/redmine/attachments/download/2490/ClientCode.tar.gz",
            "/redmine/attachments/download/2602/finesce%23api%23v0.1-sources.tar.gz",
            "/redmine/attachments/download/2603/finesce%23api%23v0.1.war",
            "/redmine/attachments/download/2623/D7.7%20Finesce%20API%20Handbook%20v1.0.pdf"
        ],
        "Open Source": "",
        "Contact Person": "\n<p>\n Artemis Voulkidis (Synelixis Solutions) - voulkidis at synelixis doc com\n</p>\n\n\n",
        "Overview": "\n\n<h3>\n What you get\n</h3>\n\n<p>\n A consolidated approach for interacting with the various FINESCE trial infrastructures, using a simple, RESTful API.\n</p>\n\n\n<h3>\n Why to get it\n</h3>\n\n<p>\n It enables seamless, interoperable interaction with all the FINESCE trial infrastructures, in a transparent, homogeneous manner.\n</p>\n\n\n<h3>\n Open Specifications\n</h3>\n\n<p>\n A complete list of functionalities is going to be released in the coming months. As FAM DSE will be released as OSS, open specifications will be also available.\n</p>\n\n\n",
        "Downloads": "\n<table class=\"themed\">\n <tr class=\"top\">\n  <td>\n   Location\n  </td>\n  <td>\n   Revision\n  </td>\n  <td>\n   Release Date\n  </td>\n  <td>\n   Description\n  </td>\n </tr>\n <tr>\n  <td>\n   <a class=\"external\" href=\"files/finesce%23api%23v0.1.war\">\n    WAR\n   </a>\n  </td>\n  <td>\n   0.1\n  </td>\n  <td>\n   Mon Jun 29th 13:18:00 CET 2015\n  </td>\n  <td>\n   The deployable .war file of the DSE\n  </td>\n </tr>\n <tr>\n  <td>\n   <a class=\"external\" href=\"files/finesce%23api%23v0.1-sources.tar.gz\">\n    SRC\n   </a>\n  </td>\n  <td>\n   0.1\n  </td>\n  <td>\n   Mon Jun 29th 13:18:00 CET 2015\n  </td>\n  <td>\n   The source code of the DSE\n  </td>\n </tr>\n <tr>\n  <td>\n   <a class=\"external\" href=\"files/ClientCode.tar.gz\">\n    Client\n   </a>\n  </td>\n  <td>\n   0.1\n  </td>\n  <td>\n   Fri Apr 17th 13:30:00 CET 2015\n  </td>\n  <td>\n   Auto-generated, indicative client code\n  </td>\n </tr>\n</table>\n\n\n",
        "Instances": "\n<p>\n An instance of this DSE\u2019s reference implementation runs at\n <a class=\"external\" href=\"https://130.206.82.22\">\n  130.206.82.22\n </a>\n .\n</p>\n\n\n"
    }
]