<!DOCTYPE html>
<html class="js" lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	
	<!-- Bootstrap -->
    <link href="http://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css" rel="stylesheet">

	<!-- include javascript, jQuery FIRST -->
<!-- 	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script> -->
<!-- 	<script src="http://netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script> -->

<!-- 	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script> -->
<!-- 	<script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script> -->
<!-- 	<link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css"> -->
		<!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
   	<!-- Latest compiled and minified JavaScript -->
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>
<!--     <script src="../../dist/js/bootstrap.min.js"></script> -->
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
<!--     <script src="../../assets/js/ie10-viewport-bug-workaround.js"></script> -->
    
	<!-- Latest compiled and minified CSS -->
<!-- 	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.ss"> -->

	<!-- Optional theme -->
<!-- 	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap-theme.min.css"> -->
	
	<!-- FIWARE font -->
	<link href='http://fonts.googleapis.com/css?family=Comfortaa' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" type="text/css" href="css/userstyles.css" media="screen">
	<link rel="stylesheet" href="css/fiware.css">
	<title>FINESCE Specific Enablers</title>
</head>
<body>
	<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="index.html">FINESCE</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
              <li class="active">Home</li>
              <li><a href="FINESCE_GEs.html">Generic Enablers</a></li>
              <li><a href="FINESCE_DSEs.html">Specific Enablers</a></li>
              <li><a href="api_table.html">API</a></li>
          </ul>
        </div><!--/.navbar-collapse -->
      </div>
    </nav>
    
	<article>
		<div class="container">
			<div class="page-header">
				<h1>FINESCE Specific Enablers</h1>
			</div>
			<noscript>
				<div class="alert alert-warning" role="alert">Hi! This site won't work properly without Javascript. You may prefer the experience with Javascript enabled!</div>
			</noscript>
			<div class="enabler-list">
				<div class="dropdown">
					<div><b>Browse by Trial Site:</b></div>
					<button class="btn btn-default dropdown-toggle enabler-list-dropdown" type="button" id="dropdownMenu1" data-toggle="dropdown" aria-expanded="true">
					    <span class="caret"></span>
					</button>
					<ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu1"></ul>
				</div>
				<div class="enabler-row">
					<h2 class="header">DSE WP1</h2>
					Description of this enabler.
					<div class="category">Category</div>
				</div>
				<div class="enabler-row">
					<h2 class="header">DSE WP2</h2>
					Description of second enabler.
					<div class="category">Special Category</div>
				</div>
			</div>
			<footer>
				<p>&copy; FINESCE 2013-2015</p>
			</footer>
		</div>
	</article>
	
	<script>
		(function loadList(){
			/* global $ */
			"use strict";
			var enabler_list = $(".enabler-list");
			var dataGlobal = [];
			$.getJSON("js/json/DSEs.json", function(data){
				dataGlobal = data;
				showData("all");

				var wp_list = [];
				for (var line in data){
					wp_list[data[line].site] = true;
				}
				//fill dropdown
				$(".dropdown-menu").empty();
				$(".dropdown-menu").append('<li role="presentation"><a role="menuitem" tabindex="-1" data-id="all" href="#">All</a></li>');
				$("#dropdownMenu1").html('All <span class="caret"></span>');

				for (var wp in wp_list){
					$(".dropdown-menu").append('<li role="presentation"><a role="menuitem" tabindex="-1" data-id="'+wp+'" href="#">'+wp+'</a></li>');
				}
			});

			$(".dropdown-menu").on("click", "li a", function(){
				var selText = $(this).text();
				$("#dropdownMenu1").html(selText+' <span class="caret"></span>');
				showData($(this).data('id'));
			});

			function showData (filter) {
				$(".enabler-row").remove();

				// enabler_list.html('');
				var row_html = "";
				var data = dataGlobal;
				if(filter && filter !== "all") {
					data = data.filter(function(dt){
						return dt.site === filter;
					});
				}

				for (var line in data) {
					row_html = '<div class="enabler-row"><h2 class="header"><a href="DSE.html?id='+ data[line].id +'">'+data[line].name+'</a></h2>'+data[line].description+'<div class="category">'+data[line].site+'</div></div>';
					enabler_list.append(row_html);
				}
			}
		})();
	</script>
</body>
